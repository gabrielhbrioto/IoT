(()=>{"use strict";var e={747:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(758),r=n.n(o),a=n(935),i=n.n(a)()(r());i.push([e.id,'body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n    width: 100%;\n    height: 100%;\n}\n\n#container {\n    padding: 2%;\n    display: flex;\n    gap: 10px;\n}\n\n#container > div:first-child {\n    flex: 1; /* A primeira seção ocupa apenas o espaço necessário */\n}\n\n#container > div:last-child {\n    flex: 3; /* A segunda seção (gráfico) ocupa o restante do espaço */\n}\n\n#graficoConsumo {\n    width: 100%; /* O canvas ocupa 100% da largura do seu container */\n    height: auto; /* Ajusta automaticamente a altura */\n}\n\na {\n    text-decoration: none;\n    color: white;\n}\n\nh2 {\n    font-size: 24px;\n    margin-bottom: 10px;\n}\n\nlabel {\n    display: block;\n    margin-bottom: 5px;\n}\n\ninput[type="radio"],\ninput[type="text"] {\n    margin-bottom: 10px;\n}\n\nselect {\n    width: 150px;\n    padding: 5px;\n    border: 1px solid #ccc;\n}\n\n.btn {\n    background-color: #2196F3;\n    color: #fff;\n    padding: 12px 20px;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n}\n\n.btn-voltar {\n    display: flex;\n    align-items: center;\n    background-color: #2196F3;\n    color: white;\n    padding: 10px 15px;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n    font-size: 16px;\n    text-decoration: none;\n    transition: background-color 0.3s;\n}\n\n.btn-voltar i {\n    margin-right: 8px; \n}\n\n.btn-voltar:hover {\n    background-color: #0b7dda;\n}\n\n.triplo-container {\n    display: flex;\n    justify-content: center;\n    gap: 10px;\n    margin-top: 20px;\n}\n\n.triplo-botao {\n    padding: 10px 20px;\n    font-size: 16px;\n    cursor: pointer;\n    background-color: #ddd;\n    border: none;\n    border-radius: 5px;\n    transition: background-color 0.3s;\n}\n\n.triplo-botao:hover {\n    background-color: #ccc;\n}\n\n.triplo-botao.ativo {\n    background-color: #8faadc;\n    color: white;\n}\n',""]);const s=i},935:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(o)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var d=0;d<e.length;d++){var l=[].concat(e[d]);o&&i[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),t.push(l))}},t}},758:e=>{e.exports=function(e){return e[1]}},591:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var a={},i=[],s=0;s<e.length;s++){var c=e[s],d=o.base?c[0]+o.base:c[0],l=a[d]||0,u="".concat(d," ").concat(l);a[d]=l+1;var p=n(u),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(h);else{var m=r(h,o);o.byIndex=s,t.splice(s,0,{identifier:u,updater:m,references:1})}i.push(u)}return i}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var a=o(e=e||[],r=r||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var s=n(a[i]);t[s].references--}for(var c=o(e,r),d=0;d<a.length;d++){var l=n(a[d]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}a=c}}},128:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},51:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},855:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},740:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},656:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={id:o,exports:{}};return e[o](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;var o=n(591),r=n.n(o),a=n(740),i=n.n(a),s=n(128),c=n.n(s),d=n(855),l=n.n(d),u=n(51),p=n.n(u),h=n(656),m=n.n(h),f=n(747),g={};let v;function b(e){const t=document.querySelectorAll(".triplo-botao"),n=new URLSearchParams(window.location.search).get("id"),o=sessionStorage.getItem("token");let r;switch(e){case 1:r="ACENDER";break;case 2:r="AUTOMATICO";break;case 3:r="APAGAR"}t.forEach(((t,n)=>{n===e-1?t.classList.add("ativo"):t.classList.remove("ativo")}));const a={mensagem:r};fetch(`http://localhost:8080/salas/${n}/estado`,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(a)}).then((e=>{e.ok||console.error("Erro ao enviar mensagem:",e.status,e.statusText)})).catch((e=>{console.error("Erro na requisição:",e)}))}function y(e){const t=sessionStorage.getItem("token");fetch(`http://localhost:8080/salas/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}).then((e=>{if(200===e.status)alert("Sala excluída com sucesso"),window.location.href="listagem-salas.html";else{if(403===e.status)return e.text().then((e=>alert(e)));404===e.status?alert("Sala não encontrada"):alert("Ocorreu um erro ao tentar excluir a sala")}})).catch((e=>{console.error("Erro na requisição:",e),alert("Erro ao tentar excluir a sala")}))}function x(e){sessionStorage.getItem("id");const t=sessionStorage.getItem("token");fetch(`http://localhost:8080/inscricoes/usuario/sala/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}).then((e=>{e.ok?window.location.href="listagem-salas.html":console.error("Erro ao cancelar a inscrição:",e.status,e.statusText)})).catch((e=>{console.error("Erro na requisição:",e)}))}g.styleTagTransform=m(),g.setAttributes=l(),g.insert=c().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=p(),r()(f.A,g),f.A&&f.A.locals&&f.A.locals,document.addEventListener("DOMContentLoaded",(()=>{const e=new URLSearchParams(window.location.search).get("id"),t=sessionStorage.getItem("ID"),n=sessionStorage.getItem("token");e&&(fetch(`http://localhost:8080/salas/${e}/estado`,{method:"GET",headers:{Authorization:`Bearer ${n}`}}).then((e=>{if(!e.ok)throw new Error("Erro ao carregar estado da sala");return e.text()})).then((e=>{switch(e.toLowerCase()){case"acender":b(1);break;case"automatico":b(2);break;case"apagar":b(3);break;default:console.warn("Estado desconhecido:",e)}})).catch((e=>console.error("Erro ao carregar estado da sala:",e))),fetch(`http://localhost:8080/salas/${e}`,{method:"GET",headers:{Authorization:`Bearer ${n}`}}).then((e=>{if(!e.ok)throw new Error("Erro ao carregar dados da sala");return e.json()})).then((e=>(document.getElementById("salaTitulo").textContent=`Sala ${e.nome}`,document.getElementById("salaId").textContent=`ID: ${e.id}`,e.idCriador===parseInt(t,10)?(document.getElementById("btnExcluir").style.display="block",document.getElementById("btnExcluir").onclick=()=>y(e.id)):(document.getElementById("btnCancelarInscricao").style.display="block",document.getElementById("btnCancelarInscricao").onclick=()=>x(e.id)),fetch(`http://localhost:8080/usuarios/${e.idCriador}`,{method:"GET",headers:{Authorization:`Bearer ${n}`}})))).then((e=>{if(!e.ok)throw new Error("Erro ao carregar dados do criador da sala");return e.json()})).then((e=>{document.getElementById("salaCriador").textContent=`Criador: ${e.nome}`})).catch((e=>console.error("Erro ao carregar dados:",e))));const o=document.getElementById("btnEnviar"),r=(document.querySelectorAll('input[name="consumo"]'),document.getElementById("periodo"));o.addEventListener("click",(function(){let t,o=(new Date).toISOString();const a=new Date;switch(document.querySelector('input[name="consumo"]:checked').value){case"24 horas":t=new Date(a.getTime()-864e5).toISOString();break;case"1 semana":t=new Date(a.getTime()-6048e5).toISOString();break;case"1 mês":t=new Date(a.setMonth(a.getMonth()-1)).toISOString();break;case"outro":const e=parseInt(document.getElementById("outro").value,10),n=r.value;if(isNaN(e)||e<=0)return void alert("Por favor, insira um valor válido.");"hora"===n?t=new Date(a.getTime()-60*e*60*1e3).toISOString():"dia"===n?t=new Date(a.getTime()-24*e*60*60*1e3).toISOString():"semana"===n?t=new Date(a.getTime()-7*e*24*60*60*1e3).toISOString():"mes"===n&&(t=new Date(a.setMonth(a.getMonth()-e)).toISOString());break;default:return void alert("Selecione um período válido.")}fetch(`http://localhost:8080/medidas/periodo?idSala=${e}&inicio=${encodeURIComponent(t)}&fim=${encodeURIComponent(o)}`,{method:"GET",headers:{Authorization:`Bearer ${n}`}}).then((e=>{if(!e.ok)throw new Error("Erro ao carregar medidas");return e.json()})).then((e=>{const t=e.map((e=>new Date(e.horario).toLocaleTimeString())),n=e.map((e=>e.valor)),o=document.getElementById("graficoConsumo").getContext("2d");v&&v.destroy(),v=new Chart(o,{type:"line",data:{labels:t,datasets:[{label:"Consumo de energia [W]",data:n,borderColor:"rgba(192, 135, 75, 1)",borderWidth:2,pointRadius:0}]},options:{scales:{y:{beginAtZero:!0}}}})})).catch((e=>{console.error("Erro ao carregar medidas:",e)}))}))})),window.selecionarOpcao=b,window.excluirSala=y,window.cancelarInscricao=x,window.voltarParaListagem=function(){window.location.href="listagem-salas.html"}})();